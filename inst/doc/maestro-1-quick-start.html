<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />



<title>Quick Start</title>

<script>// Pandoc 2.9 adds attributes on both header and div. We remove the former (to
// be compatible with the behavior of Pandoc < 2.8).
document.addEventListener('DOMContentLoaded', function(e) {
  var hs = document.querySelectorAll("div.section[class*='level'] > :first-child");
  var i, h, a;
  for (i = 0; i < hs.length; i++) {
    h = hs[i];
    if (!/^h[1-6]$/i.test(h.tagName)) continue;  // it should be a header h1-h6
    a = h.attributes;
    while (a.length > 0) h.removeAttribute(a[0].name);
  }
});
</script>

<style type="text/css">
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
</style>



<style type="text/css">
code {
white-space: pre;
}
.sourceCode {
overflow: visible;
}
</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
{ counter-reset: source-line 0; }
pre.numberSource code > span
{ position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
{ content: counter(source-line);
position: relative; left: -1em; text-align: right; vertical-align: baseline;
border: none; display: inline-block;
-webkit-touch-callout: none; -webkit-user-select: none;
-khtml-user-select: none; -moz-user-select: none;
-ms-user-select: none; user-select: none;
padding: 0 4px; width: 4em;
color: #aaaaaa;
}
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa; padding-left: 4px; }
div.sourceCode
{ }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } 
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.at { color: #7d9029; } 
code span.bn { color: #40a070; } 
code span.bu { color: #008000; } 
code span.cf { color: #007020; font-weight: bold; } 
code span.ch { color: #4070a0; } 
code span.cn { color: #880000; } 
code span.co { color: #60a0b0; font-style: italic; } 
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.do { color: #ba2121; font-style: italic; } 
code span.dt { color: #902000; } 
code span.dv { color: #40a070; } 
code span.er { color: #ff0000; font-weight: bold; } 
code span.ex { } 
code span.fl { color: #40a070; } 
code span.fu { color: #06287e; } 
code span.im { color: #008000; font-weight: bold; } 
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.kw { color: #007020; font-weight: bold; } 
code span.op { color: #666666; } 
code span.ot { color: #007020; } 
code span.pp { color: #bc7a00; } 
code span.sc { color: #4070a0; } 
code span.ss { color: #bb6688; } 
code span.st { color: #4070a0; } 
code span.va { color: #19177c; } 
code span.vs { color: #4070a0; } 
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } 
</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    var j = 0;
    while (j < rules.length) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") {
        j++;
        continue;
      }
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') {
        j++;
        continue;
      }
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>




<style type="text/css">body {
background-color: #fff;
margin: 1em auto;
max-width: 700px;
overflow: visible;
padding-left: 2em;
padding-right: 2em;
font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.35;
}
#TOC {
clear: both;
margin: 0 0 10px 10px;
padding: 4px;
width: 400px;
border: 1px solid #CCCCCC;
border-radius: 5px;
background-color: #f6f6f6;
font-size: 13px;
line-height: 1.3;
}
#TOC .toctitle {
font-weight: bold;
font-size: 15px;
margin-left: 5px;
}
#TOC ul {
padding-left: 40px;
margin-left: -1.5em;
margin-top: 5px;
margin-bottom: 5px;
}
#TOC ul ul {
margin-left: -2em;
}
#TOC li {
line-height: 16px;
}
table {
margin: 1em auto;
border-width: 1px;
border-color: #DDDDDD;
border-style: outset;
border-collapse: collapse;
}
table th {
border-width: 2px;
padding: 5px;
border-style: inset;
}
table td {
border-width: 1px;
border-style: inset;
line-height: 18px;
padding: 5px 5px;
}
table, table th, table td {
border-left-style: none;
border-right-style: none;
}
table thead, table tr.even {
background-color: #f7f7f7;
}
p {
margin: 0.5em 0;
}
blockquote {
background-color: #f6f6f6;
padding: 0.25em 0.75em;
}
hr {
border-style: solid;
border: none;
border-top: 1px solid #777;
margin: 28px 0;
}
dl {
margin-left: 0;
}
dl dd {
margin-bottom: 13px;
margin-left: 13px;
}
dl dt {
font-weight: bold;
}
ul {
margin-top: 0;
}
ul li {
list-style: circle outside;
}
ul ul {
margin-bottom: 0;
}
pre, code {
background-color: #f7f7f7;
border-radius: 3px;
color: #333;
white-space: pre-wrap; 
}
pre {
border-radius: 3px;
margin: 5px 0px 10px 0px;
padding: 10px;
}
pre:not([class]) {
background-color: #f7f7f7;
}
code {
font-family: Consolas, Monaco, 'Courier New', monospace;
font-size: 85%;
}
p > code, li > code {
padding: 2px 0px;
}
div.figure {
text-align: center;
}
img {
background-color: #FFFFFF;
padding: 2px;
border: 1px solid #DDDDDD;
border-radius: 3px;
border: 1px solid #CCCCCC;
margin: 0 5px;
}
h1 {
margin-top: 0;
font-size: 35px;
line-height: 40px;
}
h2 {
border-bottom: 4px solid #f7f7f7;
padding-top: 10px;
padding-bottom: 2px;
font-size: 145%;
}
h3 {
border-bottom: 2px solid #f7f7f7;
padding-top: 10px;
font-size: 120%;
}
h4 {
border-bottom: 1px solid #f7f7f7;
margin-left: 8px;
font-size: 105%;
}
h5, h6 {
border-bottom: 1px solid #ccc;
font-size: 105%;
}
a {
color: #0033dd;
text-decoration: none;
}
a:hover {
color: #6666ff; }
a:visited {
color: #800080; }
a:visited:hover {
color: #BB00BB; }
a[href^="http:"] {
text-decoration: underline; }
a[href^="https:"] {
text-decoration: underline; }

code > span.kw { color: #555; font-weight: bold; } 
code > span.dt { color: #902000; } 
code > span.dv { color: #40a070; } 
code > span.bn { color: #d14; } 
code > span.fl { color: #d14; } 
code > span.ch { color: #d14; } 
code > span.st { color: #d14; } 
code > span.co { color: #888888; font-style: italic; } 
code > span.ot { color: #007020; } 
code > span.al { color: #ff0000; font-weight: bold; } 
code > span.fu { color: #900; font-weight: bold; } 
code > span.er { color: #a61717; background-color: #e3d2d2; } 
</style>




</head>

<body>




<h1 class="title toc-ignore">Quick Start</h1>



<p>A common task in data engineering is to automate, schedule, and
monitor multiple data processing pipelines. This is called
<strong>orchestration</strong>. <code>maestro</code> is an R package
that helps orchestrate data pipelines.</p>
<p>A fully realized <code>maestro</code> project involves the following
components and actions:</p>
<ol style="list-style-type: decimal">
<li><p>Collection of <strong>pipelines</strong> (R functions to be
orchestrated, such as batch ETL jobs)</p></li>
<li><p><strong>Orchestrator</strong> - an R script or Quarto doc that
orchestrates the pipelines and monitors them</p></li>
<li><p>A process external to R to schedule the orchestrator (e.g., cron,
Posit Connect).</p></li>
</ol>
<div id="project-setup" class="section level3">
<h3>Project Setup</h3>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="fu">library</span>(maestro)</span></code></pre></div>
<p>Create a <code>maestro</code> project in an existing project or a new
project using <code>create_maestro()</code> or the New Project wizard in
RStudio. This creates the orchestrator script and the folder of
pipelines with one sample pipeline. Your project should look something
like this:</p>
<pre><code>maestro_project
├── maestro_project.Rproj
├── orchestrator.R
└── pipelines
    ├── my_pipe.R
    └── another_pipe.R</code></pre>
</div>
<div id="pipelines" class="section level2">
<h2>Pipelines</h2>
<p>Pipelines are the jobs you want to automate, schedule, and monitor.
For the most part, they’re regular R functions with a special sprinkling
of comments.</p>
<div id="anatomy-of-a-pipeline" class="section level3">
<h3>Anatomy of a Pipeline</h3>
<p>A pipeline is simply an R function with decorators called maestro
tags. Maestro tags are special code comments used for communicating the
scheduling and configuration of a pipeline to the orchestrator. Let’s
take a quick look at the sample <code>my_pipe.R</code>:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="co">#&#39; my_pipe maestro pipeline</span></span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a><span class="co">#&#39;</span></span>
<span id="cb3-3"><a href="#cb3-3" tabindex="-1"></a><span class="co">#&#39; @maestroFrequency 1 day</span></span>
<span id="cb3-4"><a href="#cb3-4" tabindex="-1"></a><span class="co">#&#39; @maestroStartTime 2024-05-24</span></span>
<span id="cb3-5"><a href="#cb3-5" tabindex="-1"></a><span class="co">#&#39; @maestroTz UTC</span></span>
<span id="cb3-6"><a href="#cb3-6" tabindex="-1"></a><span class="co">#&#39; @maestroLogLevel INFO</span></span>
<span id="cb3-7"><a href="#cb3-7" tabindex="-1"></a></span>
<span id="cb3-8"><a href="#cb3-8" tabindex="-1"></a>my_pipe <span class="ot">&lt;-</span> <span class="cf">function</span>() {</span>
<span id="cb3-9"><a href="#cb3-9" tabindex="-1"></a></span>
<span id="cb3-10"><a href="#cb3-10" tabindex="-1"></a>  <span class="co"># Pipeline code</span></span>
<span id="cb3-11"><a href="#cb3-11" tabindex="-1"></a>}</span></code></pre></div>
<p><code>my_pipe</code> is a function with an empty body - so right now
it won’t do anything. The comments above are interpreted by
<code>maestro</code> as “this function is scheduled to run every day
starting at 2024-05-24 (00:00:00) UTC time”.</p>
<p>maestroFrequency and maestroStartTime are the most important tags for
scheduling. Frequency is how often you want the pipeline to run and can
be formatted as a single string like hourly, daily, weekly, biweekly,
etc. or with a number and a unit (e.g., 1 day, 3 hours, etc.).</p>
<p>Note that you don’t need to provide all these tags. A single maestro
tag is enough to distinguish it as a pipeline. Pipelines missing tags
will use consistent defaults (e.g., if <code>maestroFrequency</code> is
missing the default is 1 day/daily).</p>
<p>In most use cases, the actual code inside of <code>my_pipe</code>
would be to run an ETL job (extract data from a source, transform it,
and load it into a file system or database). In technical terms, it’s
the <em>side effect</em> of the code and not its return value that is
important.</p>
<p>Here’s a more realistic, albeit impractical, example:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="co">#&#39; my_pipe maestro pipeline</span></span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a><span class="co">#&#39;</span></span>
<span id="cb4-3"><a href="#cb4-3" tabindex="-1"></a><span class="co">#&#39; @maestroFrequency 1 day</span></span>
<span id="cb4-4"><a href="#cb4-4" tabindex="-1"></a><span class="co">#&#39; @maestroStartTime 2024-05-24</span></span>
<span id="cb4-5"><a href="#cb4-5" tabindex="-1"></a><span class="co">#&#39; @maestroTz UTC</span></span>
<span id="cb4-6"><a href="#cb4-6" tabindex="-1"></a><span class="co">#&#39; @maestroLogLevel INFO</span></span>
<span id="cb4-7"><a href="#cb4-7" tabindex="-1"></a></span>
<span id="cb4-8"><a href="#cb4-8" tabindex="-1"></a>my_pipe <span class="ot">&lt;-</span> <span class="cf">function</span>() {</span>
<span id="cb4-9"><a href="#cb4-9" tabindex="-1"></a></span>
<span id="cb4-10"><a href="#cb4-10" tabindex="-1"></a>  random_data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb4-11"><a href="#cb4-11" tabindex="-1"></a>    <span class="at">letters =</span> <span class="fu">sample</span>(letters, <span class="dv">10</span>),</span>
<span id="cb4-12"><a href="#cb4-12" tabindex="-1"></a>    <span class="at">numbers =</span> <span class="fu">sample.int</span>(<span class="dv">10</span>)</span>
<span id="cb4-13"><a href="#cb4-13" tabindex="-1"></a>  )</span>
<span id="cb4-14"><a href="#cb4-14" tabindex="-1"></a>  </span>
<span id="cb4-15"><a href="#cb4-15" tabindex="-1"></a>  <span class="fu">write.csv</span>(random_data, <span class="at">file =</span> <span class="fu">tempfile</span>())</span>
<span id="cb4-16"><a href="#cb4-16" tabindex="-1"></a>}</span></code></pre></div>
</div>
<div id="adding-new-pipelines" class="section level3">
<h3>Adding New Pipelines</h3>
<p>A project with a single pipeline is ok, but in <code>maestro</code>
is more useful when you have multiple jobs to run. You can add more
pipelines to your pipelines directory manually or use
<code>create_pipeline()</code>:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="fu">create_pipeline</span>(</span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a>  <span class="at">pipe_name =</span> <span class="st">&quot;another_pipeline&quot;</span>,</span>
<span id="cb5-3"><a href="#cb5-3" tabindex="-1"></a>  <span class="at">pipeline_dir =</span> <span class="st">&quot;pipelines&quot;</span>,</span>
<span id="cb5-4"><a href="#cb5-4" tabindex="-1"></a>  <span class="at">frequency =</span> <span class="st">&quot;1 hour&quot;</span>,</span>
<span id="cb5-5"><a href="#cb5-5" tabindex="-1"></a>  <span class="at">start_time =</span> <span class="st">&quot;2024-05-17 15:00:00&quot;</span>,</span>
<span id="cb5-6"><a href="#cb5-6" tabindex="-1"></a>  <span class="at">tz =</span> <span class="st">&quot;America/Halifax&quot;</span>,</span>
<span id="cb5-7"><a href="#cb5-7" tabindex="-1"></a>  <span class="at">log_level =</span> <span class="st">&quot;ERROR&quot;</span></span>
<span id="cb5-8"><a href="#cb5-8" tabindex="-1"></a>)</span></code></pre></div>
</div>
</div>
<div id="orchestrator" class="section level2">
<h2>Orchestrator</h2>
<p>The orchestrator is the process that schedules and monitors the
pipelines.</p>
<div id="anatomy-of-the-orchestrator" class="section level3">
<h3>Anatomy of the Orchestrator</h3>
<p>The orchestrator can be an R script, Quarto/RMarkdown doc, but here
we’ll use a regular R script. Here is where you’ll run
<code>maestro</code> functions. The two main functions are
<code>build_schedule()</code> and <code>run_schedule()</code>.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="fu">library</span>(maestro)</span>
<span id="cb6-2"><a href="#cb6-2" tabindex="-1"></a></span>
<span id="cb6-3"><a href="#cb6-3" tabindex="-1"></a>schedule <span class="ot">&lt;-</span> <span class="fu">build_schedule</span>()</span>
<span id="cb6-4"><a href="#cb6-4" tabindex="-1"></a></span>
<span id="cb6-5"><a href="#cb6-5" tabindex="-1"></a>output <span class="ot">&lt;-</span> <span class="fu">run_schedule</span>(</span>
<span id="cb6-6"><a href="#cb6-6" tabindex="-1"></a>  schedule,</span>
<span id="cb6-7"><a href="#cb6-7" tabindex="-1"></a>  <span class="at">orch_frequency =</span> <span class="st">&quot;1 hour&quot;</span></span>
<span id="cb6-8"><a href="#cb6-8" tabindex="-1"></a>)</span></code></pre></div>
<div class="asciicast" style="color: #172431;font-family: &#39;Fira Code&#39;,Monaco,Consolas,Menlo,&#39;Bitstream Vera Sans Mono&#39;,&#39;Powerline Symbols&#39;,monospace;line-height: 1.300000">
<pre>
<span style="color: #2AA198;">ℹ</span> 1 script successfully parsed                                                  
                                                                                
── [2025-07-18 08:13:23]                                                        
Running pipelines <span style="color: #859900;">▶</span>                                                             
                                                                                
── [2025-07-18 08:13:23]                                                        
Pipeline execution completed <span style="color: #525252;">■</span> | 0.003 sec elapsed                              
<span style="color: #859900;">✔</span> 0 successes | <span style="color: #073642;">→</span> 1 skipped | <span style="color: #D33682;">!</span> 0 warnings | <span style="color: #DC322F;">✖</span> 0 errors | <span style="color: #2AA198;">◼</span> 1 total             
────────────────────────────────────────────────────────────────────────────────
                                                                                
── Next scheduled pipelines <span style="color: #2AA198;">❯</span>                                                   
Pipe name | Next scheduled run                                                  
• my_pipe | 2025-07-19                                                          
</pre>
</div>
<p>Building the schedule gets <code>maestro</code> to look through the
pipelines in the pipelines folder and creates a schedule object. Then,
you pass that to <code>run_schedule()</code> along with how often the
orchestrator is supposed to run. It is important to tell
<code>maestro</code> how often it’ll be checking the pipelines using the
<code>orch_frequency</code> parameter. Here, we’re informing it that the
orchestrator is running every 1 hour.</p>
<p>Importantly, it isn’t <code>maestro</code>’s job to actually run it
this often - it’s <em>your</em> job to make sure it runs at that
frequency (e.g., deploying it via cron or some cloud environment where
code can be scheduled).<a href="#fn1" class="footnote-ref" id="fnref1"><sup>1</sup></a></p>
</div>
</div>
<div class="footnotes footnotes-end-of-document">
<hr />
<ol>
<li id="fn1"><p>The decision around how often to run the orchestrator
depends on the frequencies of the pipelines in the project. The simplest
guideline is to take the frequency of your most often recurring pipeline
and split that in half. So for example, if my most often running
pipeline runs every 1 day then my orchestrator should run every 12
hours.<a href="#fnref1" class="footnote-back">↩︎</a></p></li>
</ol>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
